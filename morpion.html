<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Morpion</title>
    <style media="screen">
      *{
        position: absolute;
      }
      #Main{
        width: inherit;;
      }
      #Grille{
        width: 600px;
        height: 600px;
        visibility: visible;
      }
    </style>
  </head>
  <body>
    <div id="Main">
      <img onload="setInterval(affiche, 100)" src="MorpionGrille.png" id="Grille" />
      <img id="Case00" src="" alt="">
      <img id="Case01" src="" alt="">
      <img id="Case02" src="" alt="">
      <img id="Case10" src="" alt="">
      <img id="Case11" src="" alt="">
      <img id="Case12" src="" alt="">
      <img id="Case20" src="" alt="">
      <img id="Case21" src="" alt="">
      <img id="Case22" src="" alt="">
    </div>
    <script type="text/javascript">
      Joueur = 1;

      var tableau = {
        element: document.getElementById("Grille"),
        cases: [[0,0,0],
                [0,0,0],
                [0,0,0]],
        table: [[0,0,0],
                [0,0,0],
                [0,0,0]]
      };

      for (var i = 0; i < tableau.cases.length; i++) {
        for (var y = 0; y < tableau.cases[i].length; y++) {
          tableau.cases[i][y] = document.getElementById("Case"+i+y);
        }
      }

      function CheckVictoire(joueur){
        for (var i = 0; i < tableau.table.length; i++) {
          if ((tableau.table[i][0] == joueur) && (tableau.table[i][1] == joueur) && (tableau.table[i][2] == joueur)) {
            return true;
          }
        }

        for (var i = 0; i < tableau.table.length; i++) {
          if ((tableau.table[0][i] == joueur) && (tableau.table[1][i] == joueur) && (tableau.table[2][i] == joueur)) {
            return true;
          }
        }

        if ((tableau.table[0][0] == joueur) && (tableau.table[1][1] == joueur) && (tableau.table[2][2] == joueur)) {
          return true;
        }
        if ((tableau.table[2][0] == joueur) && (tableau.table[1][1] == joueur) && (tableau.table[0][2] == joueur)) {
          return true;
        }

        return false;
      }

      function PoserJeton(x,y,joueur){
        tableau.table[x][y] = joueur;
        TourSuivant();
        afficheCases();
      }

      function ClearTable(){
        for (var i = 0; i < tableau.table.length; i++) {
          for (var y = 0; y < tableau.table[i].length; y++) {
            tableau.table[i][y] = 0;
          }
        }
      }

      function afficheCases(){
        for (var i = 0; i < tableau.table.length; i++) {
          for (var y = 0; y < tableau.table[i].length; y++) {
            switch (tableau.table[i][y]) {
              case 1:
                tableau.cases[i][y].src = "Croix.png";
                break;
              case 2:
                tableau.cases[i][y].src = "Cercle.png";
                break;
              default:
                tableau.cases[i][y].src = "";
            };
          }
        }
      }

      function affiche(){
        var largeurTable = document.getElementById("Grille").width;
        var hauteurTable = document.getElementById("Grille").height;

        tableau.element.style.left = (Math.floor((window.innerWidth / 2)) - Math.floor((largeurTable /2))) + "px" ;
        tableau.element.style.top = (Math.floor((window.innerHeight / 2)) - Math.floor((hauteurTable /2))) + "px" ;

        posTableLeft = parseInt(tableau.element.style.left);
        posTableTop = parseInt(tableau.element.style.top);

        for (i = 0; i < 3; i++) {
          for (y = 0; y < 3; y++) {
            tableau.cases[i][y].onclick = PoserJeton(i, y, Joueur);
            tableau.cases[i][y].width = largeurTable/3;
            tableau.cases[i][y].height = largeurTable/3;
            switch (i) {
              case 0:
                tableau.cases[i][y].style.top = posTableTop+"px";
                break;
              case 1:
                tableau.cases[i][y].style.top = (posTableTop + tableau.element.height/3)+"px";
                break;
              case 2:
                tableau.cases[i][y].style.top = (posTableTop + tableau.element.height/3*2)+"px";
                break;
            }
            switch (y) {
              case 0:
                tableau.cases[i][y].style.left = posTableLeft+"px";
                break;
              case 1:
                tableau.cases[i][y].style.left = (posTableLeft + tableau.element.width/3)+"px";
                break;
              case 2:
                tableau.cases[i][y].style.left = (posTableLeft + tableau.element.width/3*2)+"px";
                break;

            }
          }
        }

      }

      function TourSuivant(){
        if (Joueur == 1) {
          Joueur = 2;
        }
        else {
          Joueur = 1;
        }
      }
    </script>

  </body>
</html>
