<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Morpion</title>
  </head>
  <body>
    <script type="text/javascript">
      Joueur = 1;

      function CreateurImg(Id, Src, Emplacement = document.body){
        var img = document.createElement("IMG");
        img.id = Id;
        img.src = Src;

        if (typeof(Emplacement) !== "string") {
          Emplacement.appendChild(img);
        }
        else {
          document.getElementById(Emplacement).appendChild(img);
        }

        return document.getElementById(Id);
      }

      function CreateurDiv(Id, Emplacement = document.body){
        var div = document.createElement("DIV");
        div.id = Id;

        if (typeof(Emplacement) !== "string") {
          Emplacement.appendChild(div);
        }
        else {
          document.getElementById(Emplacement).appendChild(div);
        }

        return document.getElementById(Id);
      }

      var tableau = {
        grille: CreateurImg("Grille", "MorpionGrille.png"),
        table:  [[0,0,0],
                [0,0,0],
                [0,0,0]],
        left: this.grille.style.left,
        top: this.grille.style.top
      };

      class Tableau {
        constructor() {
          this.largeur = 3;
          this.hauteur = 3;

          var grille = document.createElement("IMG");
          grille.src = "MorpionGrille.png";
          grille.id = "Grille";
          //this.element.style.position = "absolute";
          document.body.appendChild(grille);
          this.element = document.getElementById("Grille");

          // Création de la table
          this.Table = [];
          for (var i = 0; i < this.largeur; i++) {
            this.Table[i] = [];
            for (var y = 0; y < this.hauteur; y++) {
              this.Table[i][y] = 0;
            }
          }
        }

        ClearTable(){
          for (var i = 0; i < this.largeur; i++) {
            for (var y = 0; y < this.hauteur; y++) {
              this.Table[i][y] = 0;
            }
          }
        }

        PoserElement(joueur, posL, posH){
          this.Table[posL][posH] = joueur;
        }

        /*
        * Returne True si le joueur à gagné
        * @param {[int]} joueur Le joueur dont vous voulez vérifiez la victoire
        * @return {[bool]}
         */
        CheckVictoire(joueur){
          for (var i = 0; i < this.largeur; i++) {
            if ((this.Table[i][0] == joueur) && (this.Table[i][1] == joueur) && (this.Table[i][2] == joueur)) {
              return true;
            }
          }

          for (var i = 0; i < this.hauteur; i++) {
            if ((this.Table[0][i] == joueur) && (this.Table[1][i] == joueur) && (this.Table[2][i] == joueur)) {
              return true;
            }
          }

          if ((this.Table[0][0] == joueur) && (this.Table[1][1] == joueur) && (this.Table[2][2] == joueur)) {
            return true;
          }
          if ((this.Table[2][0] == joueur) && (this.Table[1][1] == joueur) && (this.Table[0][2] == joueur)) {
            return true;
          }

          return false;
        }

        AffichageElement(){
          var hauteurFenetre = window.innerHeight;
          var largeurFenetre = window.innerWidth;


          this.element.style.left = (largeurFenetre/2)-this.element.style.width + "px";
          this.element.style.top = (hauteurFenetre/2)-this.element.style.height + "px";
        }
      }

      var table = new Tableau();
      Affichage();
      function Affichage(){
          setInterval(table.AffichageElement, 100);
      }

      function Tour(){
        if (Joueur == 1) {
          Joueur = 2;
        }
        else {
          Joueur = 1;
        }
      }


      table.PoserElement(Joueur, 2, 2);

    </script>

  </body>
</html>
